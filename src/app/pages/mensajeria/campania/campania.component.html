<div class="flex min-h-screen bg-gray-50" style="font-family: 'Barlow', sans-serif;">
  <app-sidebar-negocio></app-sidebar-negocio>
  
  <div class="flex-1 flex flex-col ml-0 lg:ml-64 overflow-hidden">
    <app-navbar class="sticky top-0 z-30"></app-navbar>
    
    <!-- Sistema de Notificaciones Mejorado -->
    <div *ngIf="notification.show" 
         [class]="'notification fixed top-20 right-4 z-40 transform transition-all duration-300 ' + 
                  (notification.show ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0') + 
                  ' ' + notification.type">
      <div class="flex items-start p-4 rounded-lg shadow-lg max-w-md">
        <div class="flex-shrink-0">
          <i [class]="notification.icon + ' text-xl'"></i>
        </div>
        <div class="ml-3 flex-1 pt-0.5">
          <p class="text-sm font-medium">{{notification.title}}</p>
          <p class="mt-1 text-sm">{{notification.message}}</p>
        </div>
        <button (click)="dismissNotification()" class="ml-4 text-gray-400 hover:text-gray-500">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
    
    <!-- Modal Nueva Campaña Mejorado -->
    <div id="newCampaignModal" class="modal fixed inset-0 z-50 hidden" [class.hidden]="!modals.newCampaignModal">
      <div class="modal-overlay absolute inset-0 bg-black opacity-30"></div>
      <div class="modal-container fixed inset-0 flex items-center justify-center p-4">
        <div class="modal-content bg-white rounded-xl shadow-2xl w-full max-w-2xl transform transition-all">
          <div class="flex justify-between items-center p-6 border-b">
            <h3 class="text-2xl font-semibold text-gray-900">Crear Nueva Campaña</h3>
            <button (click)="closeModal('newCampaignModal')"
                    class="text-gray-500 hover:text-gray-700 rounded-full p-1 hover:bg-gray-100">
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>

          <div class="p-6 space-y-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Nombre de la campaña</label>
              <input type="text" [(ngModel)]="campaignName"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                    placeholder="Ej: Oferta de Verano 2023">
              <p class="mt-1 text-xs text-gray-500">Este nombre es solo para referencia interna</p>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-3">Tipo de campaña</label>
              <div class="grid grid-cols-3 gap-4">
                <button *ngFor="let type of campaignTypes" 
                        [class]="'p-4 border rounded-lg flex flex-col items-center transition-all ' + 
                                (selectedCampaignType === type.id ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-blue-300')"
                        (click)="selectCampaignType(type.id)">
                  <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mb-3">
                    <i [class]="'fas fa-' + type.icon"></i>
                  </div>
                  <span class="text-sm font-medium">{{type.name}}</span>
                  <span class="text-xs text-gray-500 mt-1">{{type.description}}</span>
                </button>
              </div>
            </div>

            <div *ngIf="selectedCampaignType === 'regular'">
              <label class="block text-sm font-medium text-gray-700 mb-3">Seleccionar plantilla</label>
              <div class="grid grid-cols-3 gap-4">
                <div *ngFor="let template of templates" 
                     [class]="'template-card cursor-pointer group relative overflow-hidden rounded-lg ' + 
                             (currentTemplate === template.id ? 'ring-2 ring-blue-500' : '')"
                     (click)="selectTemplate(template.id)">
                  <div class="template-preview h-32" [style.background]="template.gradient"></div>
                  <div class="p-3 bg-white">
                    <div class="flex justify-between items-start">
                      <h4 class="text-sm font-medium">{{template.title}}</h4>
                      <span *ngIf="template.premium" class="text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">PRO</span>
                    </div>
                    <div class="flex justify-between items-center mt-2">
                      <span class="text-xs text-gray-500">{{template.category}}</span>
                      <button class="text-blue-600 hover:text-blue-800 text-xs font-medium">
                        Vista previa
                      </button>
                    </div>
                  </div>
                  <div *ngIf="currentTemplate === template.id" 
                       class="absolute inset-0 bg-black/10 flex items-center justify-center">
                    <div class="bg-white rounded-full p-2 text-blue-600 shadow-lg">
                      <i class="fas fa-check"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="flex justify-end gap-3 p-6 border-t">
            <button (click)="closeModal('newCampaignModal')"
                    class="px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
              Cancelar
            </button>
            <button (click)="createNewCampaign()"
                    [disabled]="!campaignName || !selectedCampaignType"
                    [class]="'px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:opacity-90 transition ' + 
                            (!campaignName || !selectedCampaignType ? 'opacity-50 cursor-not-allowed' : '')">
              <i class="fas fa-plus mr-2"></i> Crear Campaña
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Subir Imagen Mejorado -->
    <div id="imageUploadModal" class="modal fixed inset-0 z-50 hidden" [class.hidden]="!modals.imageUploadModal">
      <div class="modal-overlay absolute inset-0 bg-black opacity-30"></div>
      <div class="modal-container fixed inset-0 flex items-center justify-center p-4">
        <div class="modal-content bg-white rounded-xl shadow-2xl w-full max-w-2xl transform transition-all">
          <div class="flex justify-between items-center p-6 border-b">
            <h3 class="text-2xl font-semibold text-gray-900">Subir Imagen</h3>
            <button (click)="closeModal('imageUploadModal')"
                    class="text-gray-500 hover:text-gray-700 rounded-full p-1 hover:bg-gray-100">
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>

          <div class="p-6 space-y-6">
            <div class="upload-area border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer transition hover:border-blue-400"
                 id="dropZone" 
                 (click)="triggerFileInput()"
                 (dragover)="onDragOver($event)"
                 (dragleave)="onDragLeave($event)"
                 (drop)="onDrop($event)">
              <div [class]="'mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 ' + 
                            (isDragging ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-400')">
                <i [class]="'fas ' + (isDragging ? 'fa-cloud-upload-alt' : 'fa-image') + ' text-2xl'"></i>
              </div>
              <h4 class="text-lg font-medium text-gray-700 mb-1">
                {{isDragging ? 'Suelta tu imagen aquí' : 'Arrastra y suelta tu imagen'}}
              </h4>
              <p class="text-gray-500 mb-4">o <span class="text-blue-600 font-medium">haz clic para seleccionar</span></p>
              <p class="text-xs text-gray-400">Formatos soportados: JPG, PNG, GIF, SVG (Máx. 10MB)</p>
              <input type="file" #fileInput accept="image/*" style="display: none;" (change)="onFileSelected($event)">
            </div>

            <div *ngIf="uploadedImage" class="mt-4 space-y-4">
              <h4 class="text-sm font-medium text-gray-700">Vista previa</h4>
              <div class="flex flex-col md:flex-row gap-4 p-4 border border-gray-200 rounded-lg">
                <div class="flex-shrink-0">
                  <img [src]="uploadedImage.src" class="max-w-full max-h-40 rounded-lg object-contain border border-gray-100">
                </div>
                <div class="flex-1">
                  <div class="flex justify-between items-start">
                    <div>
                      <p class="font-medium text-gray-800">{{uploadedImage.name}}</p>
                      <p class="text-sm text-gray-500">{{uploadedImage.size}} · {{uploadedImage.dimensions}}</p>
                    </div>
                    <button (click)="removeUploadedImage()" class="text-gray-400 hover:text-gray-600">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                  
                  <div class="mt-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ajustes de imagen</label>
                    <div class="grid grid-cols-2 gap-4">
                      <div>
                        <label class="text-xs text-gray-500 block mb-1">Tamaño</label>
                        <select [(ngModel)]="imageSettings.size" class="w-full text-sm border border-gray-300 rounded px-3 py-2">
                          <option value="original">Original</option>
                          <option value="small">Pequeño</option>
                          <option value="medium">Mediano</option>
                          <option value="large">Grande</option>
                        </select>
                      </div>
                      <div>
                        <label class="text-xs text-gray-500 block mb-1">Alineación</label>
                        <select [(ngModel)]="imageSettings.alignment" class="w-full text-sm border border-gray-300 rounded px-3 py-2">
                          <option value="left">Izquierda</option>
                          <option value="center">Centro</option>
                          <option value="right">Derecha</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="flex justify-end gap-3 p-6 border-t">
            <button (click)="closeModal('imageUploadModal')"
                    class="px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
              Cancelar
            </button>
            <button (click)="applyUploadedImage()"
                    [disabled]="!uploadedImage"
                    [class]="'px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:opacity-90 transition ' + 
                            (!uploadedImage ? 'opacity-50 cursor-not-allowed' : '')">
              <i class="fas fa-check mr-2"></i> Usar Imagen
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Contenido Principal Reorganizado -->
    <main class="flex-1 overflow-auto p-6">
      <div class="bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-2 rounded text-sm mb-4">
  🚧 Sección en desarrollo. Estamos trabajando para mejorar tu experiencia.
</div>

      <div class="mb-8">
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 p-6 bg-white rounded-xl shadow-sm border border-gray-100">
          <div>
            <div class="flex items-center gap-3">
              <h1 class="text-2xl font-semibold text-gray-900">Email Marketing</h1>
              <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center gap-1">
                <i class="fas fa-plug text-xs"></i>
                <span>Conectado con Mailchimp</span>
               
              </span>
           
            </div>
            <p class="text-gray-500 text-sm mt-1">Crea y gestiona tus campañas de email marketing</p>
          </div>
          <div class="flex gap-3">
            <button (click)="openModal('newCampaignModal')"
                    class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-5 py-2.5 rounded-lg hover:opacity-90 transition flex items-center gap-2">
              <i class="fas fa-plus"></i>
              <span>Nueva Campaña</span>
            </button>
            <div class="relative">
              <button (click)="toggleQuickActions()"
                      class="bg-white border border-gray-300 text-gray-700 px-3 py-2.5 rounded-lg hover:bg-gray-50 transition flex items-center gap-2">
                <i class="fas fa-ellipsis-h"></i>
              </button>
              <div *ngIf="showQuickActions" 
                   class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20 border border-gray-200">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Importar contactos</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Configuración</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Ver tutorial</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Estadísticas Rápidas Mejoradas -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
        <div *ngFor="let stat of stats" 
             [class]="'bg-white p-4 rounded-xl shadow-sm border-l-4 ' + stat.borderColor + ' transition hover:shadow-md'">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm text-gray-600">{{stat.label}}</p>
              <p class="text-2xl font-semibold text-gray-900 mt-1">{{stat.value}}</p>
            </div>
            <div [class]="'p-3 rounded-full ' + stat.bgColor">
              <i [class]="stat.icon + ' ' + stat.iconColor"></i>
            </div>
          </div>
          <div class="mt-3 flex items-center justify-between">
            <div class="flex items-center text-sm" [class]="stat.trend === 'up' ? 'text-green-600' : 'text-red-600'">
              <i [class]="'fas fa-arrow-' + (stat.trend === 'up' ? 'up' : 'down') + ' mr-1'"></i>
              {{stat.change}}
            </div>
            <a href="#" class="text-xs text-blue-600 hover:text-blue-800">Ver detalles</a>
          </div>
        </div>
      </div>

      <!-- Layout Principal Mejorado -->
      <div class="flex flex-col lg:flex-row gap-6">
        <!-- Sidebar de Campañas Mejorado -->
        <div class="lg:w-80 flex-shrink-0">
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 sticky top-24">
            <div class="p-4 border-b">
              <div class="relative">
                <input type="text" placeholder="Buscar campañas..." 
                       class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
              </div>
            </div>
            
            <div class="p-4 border-b">
              <div class="flex justify-between items-center">
                <h3 class="font-medium text-gray-900">Mis Campañas</h3>
                <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full">
                  {{filteredCampaigns.length}}/{{campaigns.length}}
                </span>
              </div>
              
              <div class="mt-3 flex flex-wrap gap-2">
                <button *ngFor="let filter of campaignFilters" 
                        [class]="'text-xs px-3 py-1 rounded-full border transition ' + 
                                (activeFilter === filter.id ? 'bg-blue-100 text-blue-800 border-blue-200' : 'bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200')"
                        (click)="setFilter(filter.id)">
                  {{filter.label}}
                </button>
              </div>
            </div>
            
            <div class="overflow-y-auto" style="max-height: calc(100vh - 300px)">
              <div class="divide-y divide-gray-200">
                <div *ngFor="let campaign of filteredCampaigns" 
                     [class]="'campaign-item p-4 transition cursor-pointer hover:bg-gray-50 ' + 
                             (selectedCampaign === campaign.id ? 'bg-blue-50' : '')"
                     (click)="selectCampaign(campaign.id)">
                  <div class="flex items-start gap-3">
                    <div [class]="'flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ' + 
                                  getIconColorClass(campaign.iconColor)">
                      <i [class]="'fas fa-' + campaign.icon"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex justify-between items-baseline">
                        <h4 class="text-sm font-medium text-gray-900 truncate">{{campaign.title}}</h4>
                        <span [class]="'text-xs px-2 py-0.5 rounded-full ' + 
                                      getStatusClass(campaign.status)">
                          {{getStatusLabel(campaign.status)}}
                        </span>
                      </div>
                      <p class="text-xs text-gray-500 mt-1 truncate">
                        {{campaign.date}} · {{campaign.recipients | number}} destinatarios
                      </p>
                      
                      <div *ngIf="campaign.openRate" class="mt-3">
                        <div class="flex items-center justify-between text-xs mb-1">
                          <span class="text-gray-600">Rendimiento</span>
                          <span class="font-medium" [class]="getPerformanceClass(campaign.performance)">
                            {{campaign.performance}}%
                          </span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-1.5">
                          <div class="bg-blue-600 h-1.5 rounded-full" [style.width.%]="campaign.performance"></div>
                        </div>
                        <div class="flex justify-between mt-2">
                          <span class="text-xs text-blue-600">{{campaign.openRate}}% apertura</span>
                          <span class="text-xs text-purple-600">{{campaign.clickRate}}% clics</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="mt-3 flex gap-2">
                    <button *ngIf="campaign.status === 'draft'" 
                            (click)="continueCampaign(campaign.id); $event.stopPropagation()"
                            class="text-xs px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
                      Continuar
                    </button>
                    <button *ngIf="campaign.status === 'scheduled'" 
                            (click)="editScheduledCampaign(campaign.id); $event.stopPropagation()"
                            class="text-xs px-3 py-1 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition">
                      Editar
                    </button>
                    <button (click)="showCampaignActions(campaign.id, $event)"
                            class="text-xs px-3 py-1 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition ml-auto">
                      <i class="fas fa-ellipsis-h"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Contenido Principal Mejorado -->
        <div class="flex-1">
          <!-- Editor de Campaña -->
          <div *ngIf="selectedCampaign" class="bg-white rounded-xl shadow-sm border border-gray-100 mb-6">
            <div class="p-5 border-b flex justify-between items-center">
              <div>
                <h2 class="text-xl font-semibold text-gray-900">{{getSelectedCampaign()?.title}}</h2>
                <div class="flex items-center gap-3 mt-1">
                  <span [class]="'text-xs px-2 py-1 rounded-full ' + getStatusClass(getSelectedCampaign()?.status)">
                    {{getStatusLabel(getSelectedCampaign()?.status)}}
                  </span>
                  <span class="text-xs text-gray-500">
                    Última modificación: {{getSelectedCampaign()?.lastModified}}
                  </span>
                </div>
              </div>
              
              <div class="flex gap-2">
                <button (click)="sendTestEmail()"
                        class="text-sm px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                  <i class="fas fa-paper-plane"></i>
                  <span>Enviar prueba</span>
                </button>
                
                <div class="relative">
                  <button (click)="toggleCampaignActions()"
                          class="text-sm px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition flex items-center gap-2">
                    <span>Acciones</span>
                    <i class="fas fa-chevron-down text-xs"></i>
                  </button>
                  <div *ngIf="showCampaignActionsDropdown" 
                       class="absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg py-1 z-20 border border-gray-200">
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Duplicar campaña</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Programar envío</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Exportar HTML</a>
                    <div class="border-t border-gray-200"></div>
                    <a href="#" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Eliminar campaña</a>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Pestañas del Editor -->
            <div class="border-b">
              <nav class="flex -mb-px">
                <button *ngFor="let tab of editorTabs" 
                        [class]="'px-4 py-3 text-sm font-medium border-b-2 ' + 
                                (activeEditorTab === tab.id ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300')"
                        (click)="setActiveEditorTab(tab.id)">
                  <i [class]="'fas fa-' + tab.icon + ' mr-2'"></i>
                  {{tab.label}}
                </button>
              </nav>
            </div>
            
            <!-- Contenido de las Pestañas -->
            <div class="p-5">
              <!-- Pestaña de Contenido -->
              <div *ngIf="activeEditorTab === 'content'">
                <div id="editorToolbar" class="editor-toolbar flex flex-wrap gap-1 p-2 border border-gray-200 rounded-lg mb-4">
                  <div class="flex border-r border-gray-200 pr-2 mr-2">
                    <button class="editor-btn" (click)="formatText('bold')" title="Negrita">
                      <i class="fas fa-bold"></i>
                    </button>
                    <button class="editor-btn" (click)="formatText('italic')" title="Cursiva">
                      <i class="fas fa-italic"></i>
                    </button>
                    <button class="editor-btn" (click)="formatText('underline')" title="Subrayado">
                      <i class="fas fa-underline"></i>
                    </button>
                  </div>
                  
                  <div class="flex border-r border-gray-200 pr-2 mr-2">
                    <button class="editor-btn" (click)="changeAlignment('left')" title="Alinear izquierda">
                      <i class="fas fa-align-left"></i>
                    </button>
                    <button class="editor-btn" (click)="changeAlignment('center')" title="Centrar">
                      <i class="fas fa-align-center"></i>
                    </button>
                    <button class="editor-btn" (click)="changeAlignment('right')" title="Alinear derecha">
                      <i class="fas fa-align-right"></i>
                    </button>
                    <button class="editor-btn" (click)="changeAlignment('justify')" title="Justificar">
                      <i class="fas fa-align-justify"></i>
                    </button>
                  </div>
                  
                  <div class="flex border-r border-gray-200 pr-2 mr-2">
                    <button class="editor-btn" (click)="createList('ul')" title="Lista con viñetas">
                      <i class="fas fa-list-ul"></i>
                    </button>
                    <button class="editor-btn" (click)="createList('ol')" title="Lista numerada">
                      <i class="fas fa-list-ol"></i>
                    </button>
                    <button class="editor-btn" (click)="outdent()" title="Disminuir sangría">
                      <i class="fas fa-outdent"></i>
                    </button>
                    <button class="editor-btn" (click)="indent()" title="Aumentar sangría">
                      <i class="fas fa-indent"></i>
                    </button>
                  </div>
                  
                  <div class="flex border-r border-gray-200 pr-2 mr-2">
                    <div class="relative">
                      <button class="editor-btn" (click)="showColorPicker = !showColorPicker" title="Color de texto">
                        <i class="fas fa-font"></i>
                        <i class="fas fa-caret-down text-xs ml-1"></i>
                      </button>
                      <div *ngIf="showColorPicker" class="absolute z-10 mt-1 w-48 bg-white shadow-lg rounded-md p-2 border border-gray-200 grid grid-cols-5 gap-1">
                        <div *ngFor="let color of textColors" 
                             [class]="'w-6 h-6 rounded-full cursor-pointer ' + (selectedTextColor === color ? 'ring-2 ring-offset-1 ring-gray-400' : '')"
                             [style.backgroundColor]="color"
                             (click)="changeTextColor(color); showColorPicker = false"></div>
                      </div>
                    </div>
                    
                    <div class="relative">
                      <button class="editor-btn" (click)="showHighlightPicker = !showHighlightPicker" title="Color de fondo">
                        <i class="fas fa-highlighter"></i>
                        <i class="fas fa-caret-down text-xs ml-1"></i>
                      </button>
                      <div *ngIf="showHighlightPicker" class="absolute z-10 mt-1 w-48 bg-white shadow-lg rounded-md p-2 border border-gray-200 grid grid-cols-5 gap-1">
                        <div *ngFor="let color of highlightColors" 
                             [class]="'w-6 h-6 rounded-full cursor-pointer ' + (selectedHighlightColor === color ? 'ring-2 ring-offset-1 ring-gray-400' : '')"
                             [style.backgroundColor]="color"
                             (click)="changeHighlightColor(color); showHighlightPicker = false"></div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="flex border-r border-gray-200 pr-2 mr-2">
                    <button class="editor-btn" (click)="insertLink()" title="Insertar enlace">
                      <i class="fas fa-link"></i>
                    </button>
                    <button class="editor-btn" (click)="openModal('imageUploadModal')" title="Insertar imagen">
                      <i class="fas fa-image"></i>
                    </button>
                    <button class="editor-btn" (click)="addButton()" title="Insertar botón">
                      <i class="fas fa-square"></i>
                    </button>
                    <button class="editor-btn" (click)="insertDivider()" title="Insertar separador">
                      <i class="fas fa-minus"></i>
                    </button>
                  </div>
                  
                  <div class="flex">
                    <button class="editor-btn" (click)="clearFormatting()" title="Limpiar formato">
                      <i class="fas fa-eraser"></i>
                    </button>
                    <button class="editor-btn" (click)="toggleCodeView()" title="Vista HTML">
                      <i class="fas fa-code"></i>
                    </button>
                    <button class="editor-btn" (click)="undo()" title="Deshacer">
                      <i class="fas fa-undo"></i>
                    </button>
                    <button class="editor-btn" (click)="redo()" title="Rehacer">
                      <i class="fas fa-redo"></i>
                    </button>
                  </div>
                </div>
                
                <!-- Vista Previa del Email Mejorada -->
                <div class="email-preview bg-gray-50 p-8 rounded-lg border border-gray-200">
                  <div class="email-content bg-white shadow-sm max-w-2xl mx-auto">
                    <div class="p-1 bg-gray-100 text-center text-xs text-gray-500 border-b">
                      Vista previa del email - {{getSelectedCampaign()?.title}}
                    </div>
                    <div class="p-5">
                      <table width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                          <td style="text-align: center; padding: 20px 0;">
                            <img [src]="getSelectedCampaign()?.content?.logo || 'https://via.placeholder.com/200x50?text=Mi+Marca'" 
                                 alt="Logo" style="max-width: 200px; cursor: pointer;" 
                                 (click)="prepareImageUpload('logo')"
                                 [class]="editorActive ? 'editable-image' : ''">
                          </td>
                        </tr>
                        <tr>
                          <td style="background-color: #f8f9fa; padding: 30px; text-align: center;">
                           <h1 id="emailTitle" class="editable" [contentEditable]="editorActive" 
                              [style.color]="selectedSecondaryColor"
                              style="font-size: 24px; margin-bottom: 20px;">
                             {{getSelectedCampaign()?.content?.title || 'Título de la campaña'}}
                           </h1>

                           <p id="greetingText" class="editable" [contentEditable]="editorActive"
                              style="font-size: 16px; margin-bottom: 25px;">
                             {{getSelectedCampaign()?.content?.greeting || 'Hola [Nombre],'}}
                           </p>

                           <p id="mainText" class="editable" [contentEditable]="editorActive"
                              style="font-size: 16px; margin-bottom: 25px;">
                             {{getSelectedCampaign()?.content?.mainText || 'Contenido principal de tu campaña de email marketing.'}}
                           </p>

                           <a href="#" id="actionButton"
                              [style.backgroundColor]="selectedSecondaryColor"
                              style="display: inline-block; color: white; text-decoration: none; padding: 12px 30px; border-radius: 5px; font-weight: bold; margin-bottom: 30px;"
                              [class]="editorActive ? 'editable-button' : ''">
                             {{getSelectedCampaign()?.content?.buttonText || 'Acción Principal'}}
                           </a>
                          </td>
                        </tr>
                        <tr>
                          <td style="padding: 30px;">
                            <img [src]="getSelectedCampaign()?.content?.promo || 'https://via.placeholder.com/600x300?text=Imagen+Promocional'" 
                                 alt="Imagen Promocional" style="width: 100%; border-radius: 8px; margin-bottom: 25px; cursor: pointer;"
                                 (click)="prepareImageUpload('promo')"
                                 [class]="editorActive ? 'editable-image' : ''">

                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
                              <div>
                                <h3 id="feature1Title" class="editable" [contentEditable]="editorActive"
                                    style="font-size: 18px; margin-bottom: 10px;">
                                  {{getSelectedCampaign()?.content?.feature1Title || 'Característica 1'}}
                                </h3>
                                <p id="feature1Text" class="editable" [contentEditable]="editorActive"
                                   style="font-size: 14px;">
                                  {{getSelectedCampaign()?.content?.feature1Text || 'Descripción de la primera característica.'}}
                                </p>
                              </div>
                              <div>
                                <h3 id="feature2Title" class="editable" [contentEditable]="editorActive"
                                    style="font-size: 18px; margin-bottom: 10px;">
                                  {{getSelectedCampaign()?.content?.feature2Title || 'Característica 2'}}
                                </h3>
                                <p id="feature2Text" class="editable" [contentEditable]="editorActive"
                                   style="font-size: 14px;">
                                  {{getSelectedCampaign()?.content?.feature2Text || 'Descripción de la segunda característica.'}}
                                </p>
                              </div>
                            </div>

                            <div style="text-align: center; padding: 20px 0; border-top: 1px solid #e2e8f0;">
                              <p style="font-size: 14px; color: #718096;">© {{currentYear}} Mi Emprendimiento. Todos los derechos reservados.</p>
                              <p style="font-size: 12px; color: #a0aec0; margin-top: 10px;">
                                <a href="#" style="color: #718096; text-decoration: none; margin: 0 5px;">Darse de baja</a> |
                                <a href="#" style="color: #718096; text-decoration: none; margin: 0 5px;">Preferencias</a>
                              </p>
                            </div>
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Pestaña de Configuración -->
              <div *ngIf="activeEditorTab === 'settings'" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Asunto del email</label>
                    <input type="text" [(ngModel)]="emailSubject"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Ej: Oferta especial solo para ti">
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nombre del remitente</label>
                    <input type="text" [(ngModel)]="senderName"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Ej: Tu Empresa">
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email del remitente</label>
                    <input type="email" [(ngModel)]="senderEmail"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Ej: contacto@tuempresa.com">
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Responder a</label>
                    <input type="email" [(ngModel)]="replyToEmail"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Ej: soporte@tuempresa.com">
                  </div>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Segmento de audiencia</label>
                  <select [(ngModel)]="selectedSegment"
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">Todos los suscriptores</option>
                    <option *ngFor="let segment of segments" [value]="segment.id">{{segment.title}} ({{segment.contacts | number}} contactos)</option>
                  </select>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Fecha de envío</label>
                    <input type="datetime-local" [(ngModel)]="scheduledDate"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Zona horaria</label>
                    <select [(ngModel)]="timezone"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      <option value="-05:00">(GMT-05:00) Lima, Bogotá, Quito</option>
                      <option value="-06:00">(GMT-06:00) Ciudad de México</option>
                      <option value="-03:00">(GMT-03:00) Buenos Aires, Santiago</option>
                    </select>
                  </div>
                </div>
                
                <div class="pt-4 border-t">
                  <div class="flex items-center justify-between">
                    <div>
                      <h4 class="text-sm font-medium text-gray-900">Configuración avanzada</h4>
                      <p class="text-sm text-gray-500">Opciones adicionales para tu campaña</p>
                    </div>
                    <button (click)="toggleAdvancedSettings()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                      {{showAdvancedSettings ? 'Ocultar' : 'Mostrar'}}
                    </button>
                  </div>
                  
                  <div *ngIf="showAdvancedSettings" class="mt-4 space-y-4">
                    <div class="flex items-start">
                      <div class="flex items-center h-5">
                        <input type="checkbox" [(ngModel)]="trackOpens"
                               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                      </div>
                      <div class="ml-3 text-sm">
                        <label class="font-medium text-gray-700">Seguimiento de aperturas</label>
                        <p class="text-gray-500">Registra cuando los destinatarios abren tu email</p>
                      </div>
                    </div>
                    
                    <div class="flex items-start">
                      <div class="flex items-center h-5">
                        <input type="checkbox" [(ngModel)]="trackClicks"
                               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                      </div>
                      <div class="ml-3 text-sm">
                        <label class="font-medium text-gray-700">Seguimiento de clics</label>
                        <p class="text-gray-500">Registra cuando los destinatarios hacen clic en los enlaces</p>
                      </div>
                    </div>
                    
                    <div class="flex items-start">
                      <div class="flex items-center h-5">
                        <input type="checkbox" [(ngModel)]="enableUTM"
                               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                      </div>
                      <div class="ml-3 text-sm">
                        <label class="font-medium text-gray-700">Parámetros UTM</label>
                        <p class="text-gray-500">Añade parámetros de seguimiento a todos los enlaces</p>
                      </div>
                    </div>
                    
                    <div *ngIf="enableUTM" class="ml-7 mt-2 grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">Campaña</label>
                        <input type="text" [(ngModel)]="utmCampaign"
                               class="w-full px-3 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                      <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">Medio</label>
                        <input type="text" [(ngModel)]="utmMedium" value="email"
                               class="w-full px-3 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                      <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">Fuente</label>
                        <input type="text" [(ngModel)]="utmSource" value="newsletter"
                               class="w-full px-3 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                      <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">Contenido (opcional)</label>
                        <input type="text" [(ngModel)]="utmContent"
                               class="w-full px-3 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Pestaña de Pruebas -->
              <div *ngIf="activeEditorTab === 'testing'" class="space-y-6">
                <div>
                  <h4 class="text-sm font-medium text-gray-900 mb-2">Enviar prueba</h4>
                  <p class="text-sm text-gray-500 mb-4">Envía una versión de prueba a direcciones de email para revisar el contenido antes del envío final.</p>
                  
                  <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                      <label class="block text-sm font-medium text-gray-700 mb-1">Direcciones de email (separadas por comas)</label>
                      <textarea [(ngModel)]="testEmails"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-24"
                                placeholder="ejemplo1@email.com, ejemplo2@email.com"></textarea>
                    </div>
                    <div class="flex-shrink-0 flex items-end">
                      <button (click)="sendTestEmail()"
                              class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        Enviar prueba
                      </button>
                    </div>
                  </div>
                </div>
                
                <div class="pt-4 border-t">
                  <h4 class="text-sm font-medium text-gray-900 mb-2">Pruebas A/B</h4>
                  <p class="text-sm text-gray-500 mb-4">Configura una prueba A/B para comparar diferentes versiones de tu campaña.</p>
                  
                  <div class="flex items-start">
                    <div class="flex items-center h-5">
                      <input type="checkbox" [(ngModel)]="enableABTesting"
                             class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                    </div>
                    <div class="ml-3 text-sm">
                      <label class="font-medium text-gray-700">Habilitar prueba A/B</label>
                      <p class="text-gray-500">Compara diferentes versiones de tu email para ver cuál funciona mejor</p>
                    </div>
                  </div>
                  
                  <div *ngIf="enableABTesting" class="ml-7 mt-4 space-y-4">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Qué probar</label>
                      <select [(ngModel)]="abTestType"
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="subject">Asunto del email</option>
                        <option value="content">Contenido del email</option>
                        <option value="sender">Remitente</option>
                      </select>
                    </div>
                    
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Tamaño de la muestra</label>
                      <select [(ngModel)]="abTestSampleSize"
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="10">10% de la lista</option>
                        <option value="20">20% de la lista</option>
                        <option value="30">30% de la lista</option>
                        <option value="50">50% de la lista</option>
                      </select>
                    </div>
                    
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Duración de la prueba</label>
                      <select [(ngModel)]="abTestDuration"
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="1">1 hora</option>
                        <option value="4">4 horas</option>
                        <option value="8">8 horas</option>
                        <option value="24">1 día</option>
                        <option value="48">2 días</option>
                      </select>
                    </div>
                    
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Métrica para determinar el ganador</label>
                      <select [(ngModel)]="abTestMetric"
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="open">Tasa de apertura</option>
                        <option value="click">Tasa de clics</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Barra de Acciones Inferior -->
            <div class="p-4 border-t flex justify-between items-center bg-gray-50 rounded-b-xl">
              <div class="flex gap-2">
                <button (click)="saveDraft()"
                        class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition">
                  Guardar borrador
                </button>
                <button *ngIf="getSelectedCampaign()?.status === 'draft'"
                        (click)="previewCampaign()"
                        class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition">
                  Vista previa
                </button>
              </div>
              
              <div class="flex gap-2">
                <button *ngIf="getSelectedCampaign()?.status !== 'sent'"
                        (click)="scheduleCampaign()"
                        class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition">
                  Programar
                </button>
                <button (click)="sendCampaign()"
                        [class]="'px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:opacity-90 transition ' +
                                (getSelectedCampaign()?.status === 'sent' ? 'opacity-50 cursor-not-allowed' : '')"
                        [disabled]="getSelectedCampaign()?.status === 'sent'">
                  {{getSelectedCampaign()?.status === 'sent' ? 'Ya enviada' : 'Enviar ahora'}}
                </button>
              </div>
            </div>
          </div>
          
          <!-- Estadísticas de Campaña Mejoradas -->
          <div *ngIf="getSelectedCampaign()?.status === 'sent'" class="bg-white rounded-xl shadow-sm border border-gray-100 mt-6">
            <div class="p-5 border-b">
              <h3 class="text-lg font-semibold text-gray-900">Rendimiento de la campaña</h3>
            </div>
            
            <div class="p-5 grid grid-cols-1 md:grid-cols-4 gap-4">
              <div class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-600">Destinatarios</p>
                    <p class="text-2xl font-semibold text-gray-900">{{getSelectedCampaign()?.recipients | number}}</p>
                  </div>
                  <div class="p-2 bg-blue-100 rounded-full text-blue-600">
                    <i class="fas fa-users text-lg"></i>
                  </div>
                </div>
                <div class="mt-4">
                  <div class="flex items-center justify-between text-xs mb-1">
                    <span class="text-gray-500">Entregados</span>
                    <span class="font-medium">{{getSelectedCampaign()?.deliveredRate}}%</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-green-500 h-1.5 rounded-full" [style.width.%]="getSelectedCampaign()?.deliveredRate"></div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-600">Tasa de apertura</p>
                    <p class="text-2xl font-semibold text-gray-900">{{getSelectedCampaign()?.openRate}}%</p>
                  </div>
                  <div class="p-2 bg-green-100 rounded-full text-green-600">
                    <i class="fas fa-envelope-open text-lg"></i>
                  </div>
                </div>
                <div class="mt-4">
                  <div class="flex items-center justify-between text-xs mb-1">
                    <span class="text-gray-500">Únicos</span>
                    <span class="font-medium">{{getSelectedCampaign()?.uniqueOpens | number}}</span>
                  </div>
                  <div class="flex items-center text-sm" [class]="getSelectedCampaign()?.openTrend === 'up' ? 'text-green-600' : 'text-red-600'">
                    <i [class]="'fas fa-arrow-' + (getSelectedCampaign()?.openTrend === 'up' ? 'up' : 'down') + ' mr-1'"></i>
                    {{getSelectedCampaign()?.openChange}}% vs promedio
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-600">Tasa de clics</p>
                    <p class="text-2xl font-semibold text-gray-900">{{getSelectedCampaign()?.clickRate}}%</p>
                  </div>
                  <div class="p-2 bg-purple-100 rounded-full text-purple-600">
                    <i class="fas fa-mouse-pointer text-lg"></i>
                  </div>
                </div>
                <div class="mt-4">
                  <div class="flex items-center justify-between text-xs mb-1">
                    <span class="text-gray-500">Clics totales</span>
                    <span class="font-medium">{{getSelectedCampaign()?.totalClicks | number}}</span>
                  </div>
                  <div class="flex items-center text-sm" [class]="getSelectedCampaign()?.clickTrend === 'up' ? 'text-green-600' : 'text-red-600'">
                    <i [class]="'fas fa-arrow-' + (getSelectedCampaign()?.clickTrend === 'up' ? 'up' : 'down') + ' mr-1'"></i>
                    {{getSelectedCampaign()?.clickChange}}% vs promedio
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-600">Rebotes</p>
                    <p class="text-2xl font-semibold text-gray-900">{{getSelectedCampaign()?.bounceRate}}%</p>
                  </div>
                  <div class="p-2 bg-red-100 rounded-full text-red-600">
                    <i class="fas fa-exclamation-triangle text-lg"></i>
                  </div>
                </div>
                <div class="mt-4">
                  <div class="flex items-center justify-between text-xs mb-1">
                    <span class="text-gray-500">Rebotes duros</span>
                    <span class="font-medium">{{getSelectedCampaign()?.hardBounces | number}}</span>
                  </div>
                  <div class="flex items-center text-sm" [class]="getSelectedCampaign()?.bounceTrend === 'down' ? 'text-green-600' : 'text-red-600'">
                    <i [class]="'fas fa-arrow-' + (getSelectedCampaign()?.bounceTrend === 'down' ? 'down' : 'up') + ' mr-1'"></i>
                    {{getSelectedCampaign()?.bounceChange}}% vs promedio
                  </div>
                </div>
              </div>
            </div>
            
            <div class="p-5 border-t">
              <h4 class="text-sm font-medium text-gray-900 mb-3">Actividad por hora</h4>
              <div class="h-64">
                <!-- Gráfico de actividad (se implementaría con una librería de gráficos) -->
                <div class="bg-gray-100 rounded-lg w-full h-full flex items-center justify-center text-gray-400">
                  Gráfico de actividad de aperturas y clics
                </div>
              </div>
            </div>
            
            <div class="p-5 border-t grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="text-sm font-medium text-gray-900 mb-3">Enlaces más clickeados</h4>
                <div class="space-y-3">
                  <div *ngFor="let link of topLinks" class="flex items-center justify-between">
                    <div class="flex-1 min-w-0">
                      <p class="text-sm text-gray-900 truncate">{{link.url}}</p>
                      <p class="text-xs text-gray-500 truncate">{{link.clicks | number}} clics ({{link.percentage}}%)</p>
                    </div>
                    <button class="text-blue-600 hover:text-blue-800 text-xs font-medium">
                      Detalles
                    </button>
                  </div>
                </div>
              </div>
              
              <div>
                <h4 class="text-sm font-medium text-gray-900 mb-3">Dispositivos</h4>
                <div class="space-y-3">
                  <div *ngFor="let device of devices" class="flex items-center">
                    <div class="w-8 flex-shrink-0">
                      <i [class]="'fas fa-' + device.icon + ' text-gray-400'"></i>
                    </div>
                    <div class="flex-1">
                      <div class="flex justify-between text-sm mb-1">
                        <span class="text-gray-900">{{device.name}}</span>
                        <span class="text-gray-500">{{device.percentage}}%</span>
                      </div>
                      <div class="w-full bg-gray-200 rounded-full h-1.5">
                        <div class="bg-blue-600 h-1.5 rounded-full" [style.width.%]="device.percentage"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Mensaje cuando no hay campaña seleccionada -->
        <div *ngIf="!selectedCampaign" class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center">
          <div class="mx-auto max-w-md">
            <i class="fas fa-envelope text-5xl text-gray-300 mb-4"></i>
            <h3 class="text-lg font-medium text-gray-900 mb-2">No hay campaña seleccionada</h3>
            <p class="text-gray-500 mb-6">Selecciona una campaña existente de la lista o crea una nueva para comenzar.</p>
            <button (click)="openModal('newCampaignModal')"
                    class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-5 py-2.5 rounded-lg hover:opacity-90 transition inline-flex items-center gap-2">
              <i class="fas fa-plus"></i>
              <span>Nueva Campaña</span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>